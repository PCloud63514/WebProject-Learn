# Entity 설계





---

##### 양방향 관계를 최대한 피하자

##### 다대다 관계(ManyToMany)를 피하자

##### Setter를 최대한 닫자.(객체의 불변성을 유지하자)

##### 모든 연관관계는 지연로딩으로 설정하자

> 즉시로딩(EAGER)는 예측이 어렵고, 어떤 SQL이 실행될지 추적이 어렵다.
>
> 예로 JPQL을 실행할 때 N + 1 문제가 자주 발생한다.
>
> 실무에서 모든 연관관계는 지연로딩(LAZY)로 설정해야한다.
>
> 연관된 Entity를 함께 DB에서 조회해야한다면, fetch, join 또는 Entity Graph 기능을 사용.
>
> @NToOne 관계는 기본이 즉시 로딩이므로 직접 지연로딩으로 설정해야한다.

##### 컬렉션은 필드에서 초기화하자

컬렉션은 필드레벨에서 바로 초기화하는 것이 null 문제에서 안전하다.