# 영속성 컨텍스트 (Persistence Context)

영속성은 프로그램의 종료 이후에도 사라지지 않는 데이터의 특성을 의미합니다.

이러한 의미는 데이터를 저장하는 FileSystem, ORDB 등에서 활용되며 여기 까지의 의미는 메모리 상에서 잃어버린 데이터 구조 상태를 이전 상태로 복구하는 것을 의미합니다.

즉 Entity를 영구 저장하는 환경을 의미합니다.



![image](https://user-images.githubusercontent.com/22608825/120094670-bd2e1d00-c15c-11eb-81a6-021b720d2405.png)



Entity 생명주기

- 비영속(new/transient): Persistence Contenxt 와 관계가 이루어지지 않은 상태

  - ``` 
    Member member = new Member();
    ```

- 영속(managed): Persistence Context에 저장된 상태

  - ```
    em.persist(member);
    ```

- 준영속(detached): Persistence Context에 저장되었다가 분리된 상태

  - ```
    em.detach(member); // entity를 persistance Context에서 분리
    em.clear(); // persistance Context를 비운다. 단 entity는 준영속
    em.close(); // persistance Context를 종료. entity는 준영속
    ```

  - 1차 캐시, 쓰기 지연, 변경 감지, 지연 로딩을 포함한 영속성 컨텍스트가 제공하는 어떠한 기능도 동작하지 않는다.

  - 식별자 값을 가지고 있다.

- 삭제(removed): 삭제된 상태

  - ```
    em.remove(member);
    ```





[JPA 영속성 컨텍스트란? (velog.io)](https://velog.io/@neptunes032/JPA-영속성-컨텍스트란)